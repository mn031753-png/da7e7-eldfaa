<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>دحيح الدفعة - بيانات الطالب</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial, sans-serif; direction: rtl; background: linear-gradient(135deg,#f6d365,#fda085); margin:0; padding:0; }
  .container { max-width:800px; margin:40px auto; background:white; padding:30px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.15);}
  label {display:block; font-size:18px; margin-top:15px;}
  select, input {width:100%; padding:10px; font-size:16px; margin-top:5px; border-radius:6px;}
  button {margin-top:25px; padding:12px 30px; font-size:18px; border:none; border-radius:8px; background:#3498db; color:white; cursor:pointer;}
</style>
</head>
<body>

<div class="container">
  <h1>بيانات الطالب</h1>

  <label>الصف الدراسي:</label>
  <select id="grade" onchange="onGradeChange()">
    <option value="">اختر الصف</option>
    <option value="first">الصف الأول الثانوي</option>
    <option value="second">الصف الثاني الثانوي</option>
    <option value="third">الصف الثالث الثانوي</option>
  </select>

  <div id="sectionDiv" style="display:none;">
    <label>الشعبة:</label>
    <select id="section" onchange="showSubjects()">
      <option value="">اختر الشعبة</option>
      <option value="science">علمي علوم</option>
      <option value="math">علمي رياضة</option>
      <option value="literary">أدبي</option>
    </select>
  </div>

  <div id="subjectsDiv"></div>

  <button onclick="goToResult()">احصل على الخطة</button>
</div>

<script>
function onGradeChange() {
  const grade = document.getElementById("grade").value;
  document.getElementById("subjectsDiv").innerHTML = "";

  if (grade === "first") {
    document.getElementById("sectionDiv").style.display = "none";
    showSubjects();
  } else if (grade === "second" || grade === "third") {
    document.getElementById("sectionDiv").style.display = "block";
  }
}

function showSubjects() {
  const grade = document.getElementById("grade").value;
  const section = document.getElementById("section")?.value;
  const div = document.getElementById("subjectsDiv");

  let subjects = [];

  if (grade === "first") {
    subjects = ["اللغة العربية","اللغة الإنجليزية","الرياضيات","العلوم المتكاملة","التاريخ","الفلسفة والمنطق"];
  }

  if (grade === "second" || grade === "third") {
    if (section === "science") subjects = ["عربي","إنجليزي","فيزياء","كيمياء","أحياء"];
    else if (section === "math") subjects = ["عربي","إنجليزي","رياضيات","فيزياء","كيمياء"];
    else if (section === "literary") subjects = ["عربي","إنجليزي","تاريخ","جغرافيا","إحصاء"];
  }

  if (subjects.length === 0) { div.innerHTML = ""; return; }

  let html = "<label>اختر المواد:</label>";
  subjects.forEach(s => {
    html += `<div><input type="checkbox" class="subject" value="${s}"> ${s}</div>`;
  });
  div.innerHTML = html;
}

function goToResult() {
  const grade = document.getElementById("grade").value;
  const section = document.getElementById("section")?.value || "";
  const checked = document.querySelectorAll(".subject:checked");

  if (grade === "" || checked.length === 0) { alert("من فضلك اختر البيانات كاملة"); return; }

  const subjects = [];
  checked.forEach(c => subjects.push(c.value));

  localStorage.setItem("grade", grade);
  localStorage.setItem("section", section);
  localStorage.setItem("subjects", JSON.stringify(subjects));

  window.location.href = "result.html";
}
</script>

</body>
</html>
